---
/* Navbar.astro - Barra de navegación responsive */
---

<header class="bg-transparent dark:bg-gray-900 fixed top-0 w-full z-10" role="banner">
  <div class="max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <div class="text-2xl font-bold text-teal-600 dark:text-teal-400">Dev</div>

      <nav class="hidden md:flex space-x-6" aria-label="Main navigation">
        <a href="#proyectos" class="text-teal-600 dark:text-teal-300 hover:text-teal-800 dark:hover:text-teal-400 transition">Proyectos</a>
        <a href="#educacion" class="text-teal-600 dark:text-teal-300 hover:text-teal-800 dark:hover:text-teal-400 transition">Educación</a>
        <a href="#sobre-mi" class="text-teal-600 dark:text-teal-300 hover:text-teal-800 dark:hover:text-teal-400 transition">Sobre Mí</a>
        <a href="#contacto" class="text-teal-600 dark:text-teal-300 hover:text-teal-800 dark:hover:text-teal-400 transition">Contacto</a>
      </nav>

      <div class="md:flex items-center space-x-4">
        <button
          id="theme-toggle"
          class="rounded bg-gray-100 dark:bg-gray-800 p-2 text-gray-600 dark:text-gray-300 hover:text-teal-700 dark:hover:text-teal-400 focus:outline-none"
          aria-label="Toggle tema"
        >
          <svg id="sun-icon" class="h-6 w-6 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
          <svg id="moon-icon" class="h-6 w-6 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
          </svg>
        </button>
      </div>

      <div class="md:hidden">
        <button
          id="menu-btn"
          class="rounded bg-gray-100 dark:bg-gray-800 p-2 text-gray-600 dark:text-gray-300 hover:text-teal-700 dark:hover:text-teal-400 focus:outline-none"
          aria-label="Toggle menú"
          aria-expanded="false"
        >
          <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>

    <nav id="mobile-menu" class="hidden md:hidden bg-black/50 dark:bg-gray-800/80 shadow-sm p-4 rounded-2xl" aria-label="Mobile navigation">
      <ul class="space-y-2">
        <li><a href="#proyectos" class="block py-2 text-white dark:text-gray-200 hover:text-teal-600 dark:hover:text-teal-400 transition">Proyectos</a></li>
        <li><a href="#educacion" class="block py-2 text-white dark:text-gray-200 hover:text-teal-600 dark:hover:text-teal-400 transition">Educación</a></li>
        <li><a href="#sobre-mi" class="block py-2 text-white dark:text-gray-200 hover:text-teal-600 dark:hover:text-teal-400 transition">Sobre Mí</a></li>
        <li><a href="#contacto" class="block py-2 text-white dark:text-gray-200 hover:text-teal-600 dark:hover:text-teal-400 transition">Contacto</a></li>
      </ul>
    </nav>
  </div>
</header>

<script is:inline>
  const menuBtn = document.getElementById('menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const themeToggleBtn = document.getElementById('theme-toggle');
  const htmlElement = document.documentElement;

  menuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
    menuBtn.setAttribute('aria-expanded', !mobileMenu.classList.contains('hidden'));
  });

  // Cerrar menú al hacer clic en un enlace
  mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu.classList.add('hidden');
      menuBtn.setAttribute('aria-expanded', 'false');
    });
  });

  // Inicializar el estado del tema
  if (localStorage.getItem('theme') === 'dark' || 
      (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    htmlElement.classList.add('dark');
    document.getElementById('sun-icon').classList.remove('hidden');
    document.getElementById('moon-icon').classList.add('hidden');
  } else {
    htmlElement.classList.remove('dark');
    document.getElementById('sun-icon').classList.add('hidden');
    document.getElementById('moon-icon').classList.remove('hidden');
  }

  // Alternar el modo oscuro
  themeToggleBtn.addEventListener('click', () => {
    htmlElement.classList.toggle('dark');
    const isDark = htmlElement.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    document.getElementById('sun-icon').classList.toggle('hidden', !isDark);
    document.getElementById('moon-icon').classList.toggle('hidden', isDark);
  });
</script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

  .font-poppins {
    font-family: 'Poppins', sans-serif;
  }
</style>